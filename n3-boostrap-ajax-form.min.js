!function(a,b){"use strict";function c(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.Init()}var d="n3BootstrapAjaxForm",e={animation:"disable",autoReset:!1,autoResetDelay:5e3,onAjaxAlways:"",onAjaxSuccess:"",onAjaxError:""};c.prototype={Init:function(){a(this.element).data("process-ajax-animation")&&(this.settings.animation=a(this.element).data("process-ajax-animation")),"undefined"!=typeof a(this.element).data("process-ajax-auto-reset")&&(this.settings.autoReset=a(this.element).data("process-ajax-auto-reset")),a(this.element).data("process-ajax-auto-reset-delay")&&(this.settings.autoResetDelay=a(this.element).data("process-ajax-auto-reset-delay")),this.Validate(),this.checkBrowserSupport()&&this.Process(),this.Setup()},Setup:function(){var b=a(this.element);this.InitializeValidation(b),this.AddFeedbackIcon(b),this.AddAlertsContainer(b),this.HideAlerts(b),this.DisableSubmit(b),this.ResetForm(b)},InitializeValidation:function(a){a.data("is-valid-select",a.find("select[required]").length?!1:!0),a.data("is-valid-input",a.find("input[required], textarea[required]").length?!1:!0)},AddFeedbackIcon:function(b){b.addClass("has-feedback").find(".form-group").each(function(){var b=a("<span />",{"class":" glyphicon form-control-feedback"});a(this).addClass("has-feedback").append(b)})},AddAlertsContainer:function(b){if(!b.find(".alerts-container").length){var c=a("<div/>",{"class":".alerts-container"});b.prepend(c)}},HideAlerts:function(a){a.find("fieldset").css("display","block"),a.find(".alert").css({display:"none"})},DisableSubmit:function(a){a.trigger("isValid")},ResetForm:function(a){a.find(".form-group.has-feedback").removeClass("has-success has-error"),a.find(".form-control-feedback").removeClass("glyphicon-remove glyphicon-ok")},ResetFormValues:function(a){a.find("select").val(""),a.find("input").not('[type="hidden"]').val(""),a.find("textarea").val("")},checkBrowserSupport:function(){var a=!0;return a=this.CanProcessFileInput()},HasFileInput:function(){return a(this.element).find('input[type="file"]').length},CanProcessFileInput:function(){return this.HasFileInput()&&"undefined"==typeof b.FormData?!1:!0},Validate:function(){a(this.element).on("isValid",function(){var b=a(this),c=b.find('[type="submit"]');b.data("is-valid-select")&&b.data("is-valid-input")?c.prop("disabled",!1):c.prop("disabled","disabled")}).on("change","select[required]",function(){var b=a(this),c=b.parents("form"),d=!0;c.find("select").each(function(){var b=a(this),c=b.parents(".form-group");b.val()?b.is(":focus")&&c.removeClass("has-error").addClass("has-success"):(d=!1,b.is(":focus")&&c.removeClass("has-success").addClass("has-error"))}),c.data("is-valid-select",d),c.trigger("isValid")}).on("keyup","input[required], textarea[required]",function(){var b=a(this),c=b.parents("form"),d=!0;c.find("input[required], textarea[required]").not('[type="hidden"]').each(function(){var b=a(this),c=b.parents(".form-group"),e=b.next("span");b.val()&&b.is(":valid")?b.is(":focus")&&(c.removeClass("has-error").addClass("has-success"),e.removeClass("glyphicon-remove").addClass("glyphicon-ok")):(d=!1,b.is(":focus")&&(c.removeClass("has-success").addClass("has-error"),e.removeClass("glyphicon-ok").addClass("glyphicon-remove")))}),c.data("is-valid-input",d),c.trigger("isValid")})},GenerateAlert:function(b,c){if(""==c)return!1;var d=a("<div />",{"class":"col-xs-12 alert alert-"+b+("slideUp"===this.settings.animation?" has-no-margin":""),html:c});return d},Process:function(){var b=this;a(this.element).on("click","[type=submit]",function(c){c.preventDefault();var d=a(this),e=d.parents("form"),f=b.HasFileInput()?new FormData(e[0]):e.serialize(),g=a.ajax({type:e.prop("method"),url:e.prop("action"),dataType:"json",data:f,processData:b.HasFileInput()?!1:!0,contentType:b.HasFileInput()?!1:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){"disable"===b.settings.animation.toString()&&(e.find("input, select, textarea").prop("disabled","disabled"),e.find(".alerts-container").css("display","block"))}});return g.done(function(){e.find(".alert-success").fadeIn(),"function"==typeof b.settings.onAjaxSuccess&&b.settings.onAjaxSuccess()}).fail(function(a){return"function"==typeof b.settings.onAjaxError?void b.settings.onAjaxError():void e.find(".alerts-container").empty().append(b.GenerateAlert("danger",a.ErrorMessage))}).always(function(){if(d.button("reset"),"slideUp"===b.settings.animation&&e.find("fieldset").slideUp(200,function(){e.find(".alerts-container").css("display","block")}),"disable"===b.settings.animation.toString()&&e.find("input, select, textarea").prop("disabled",!1),b.settings.autoReset){setTimeout(function(){b.ResetFormValues(e),b.HideAlerts(e)},b.settings.autoResetDelay)}b.ResetForm(e),"function"==typeof b.settings.onAjaxAlways&&b.settings.onAjaxAlways()}),g})}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))}),this}}(jQuery,window,document);